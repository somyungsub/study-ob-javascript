# PART1 04 강제변환


### 값 변환

* 명시적 강제변환 (=타입 캐스팅)

    - 다른 타입의 값으로 변환하는 의도가 확실한 코드.
    - 혼동의 여지가 적고, 가독성과 유지 보수성을 높임.

* 암시적 강제변환

    - 타입변환이 처리되는 과정이 명확하지 않음.
    - 변환 과정이 구체적으로 어떻게 일어나는지 명확하게 알고 사용해야 함.

- - -
### 추상연산

#### ToString

- 문자열이 아닌 값을 문자열로 변환하는 작업
    - null → "null"
    - undefined → "undefined"
    - true → "true"
    - 숫자는 그대로 문자열로 변환. 단, 너무 작거나 큰 값은 지수 형태로 바뀜

##### JSON 문자열화

- JSON 문자열화(JSON.stringify 유틸리티를 사용)는 강제변환과 똑같지는 않지만, ToString 규칙과 관련이 있다.
- 대부분 단순 값들은 toString() 변환과 기본적으로 같은 로직이다.
    
```

    JSON.stringify(42);     // "42"
    JSON.stringify("42");   // ""42"" (따옴표가 붙은 문자열 인자를 문자열화한다)
    JSON.stringify(null);   // "null"
    JSON.stringify(true);   // "true"

```


- JSON 안전 값은 모두 JSON.stringify()로 문자열화할 수 있다.
- JSON 안전 값이 아닌 것들은 undefined, 함수, 심벌, 환형 참조 객체 등이 있다.
- JSON.stringify()는 인자가 undefined, 함수, 심벌 값이면 자동으로 누락 시키며, 이런 값들이 배열에 포함되어 있으면 null로 바꾼다. 환형 참조 객체를 넘기면 에러가 발생한다.
- 부적절한 JSON 값은 toJSON() 메서드를 따로 정의해야한다.


```

    var a = {
        b : 42,
        c : o,
        d : function(){}
    };

    a.toJSON = function(){
        // 원하는 형태로 정의
        return {b: this.b};
    }

    JSON.stringify(a);     // "{"b":42}"

    // toJSON은 JSON 문자열화하기 적당한 JSON 안전 값으로 바꾸는 것,  JSON 문자열화는 JSON.stringify()가 담당

```

#### ToNumber

- 숫자 아닌 값을 수식 연산이 가능한 숫자로 변환하는 작업
    - true → 1, false → 0
    - undefined → NaN
    - null → 0
    - 문자열 값을 숫자 변환 실패 시 NaN

#### ToBoolean

- falsy 값
    - undefined
    - null
    - false
    - +0, -0, NaN
    - ""
- truthy 값
    - 위의 falsy 값 목록에 없는 값

- - -
### 명시적 강제변환
- 문자열 ↔ 숫자
    - String()과 Number() 이용 (앞에 new 키워드가 붙지 않기 때문에 객체 래퍼를 생성하는 것이 아님)
    - toString() 과 + 단항 연산자
- 날짜  → 숫자
    - new Date(), + 단항 연산자
    - Date 객체의 getTime(), now() 등의 메서드 이용 (권장)
- 틸드(~)
- indexOf 에 활용. ex) ~a.indexOf(b) // true, false
- 비 불리언 → 불리언
    - Boolean()
    - ! 단항 연산자 (= 부정 단항 연산자), !!
 
 
### 암시적 변환

- 암시적 강제변환은 부수 효과가 명확하지 않게 숨겨진 형태로 일어나는 타입변환이다.
- 암시적 강제변환의 목적 : 보일러플레이트, 불필요한 상세 구현을 줄이는 것이다.

- 문자열 ↔ 숫자
- "" 빈 문자열 접합
    -  -0, *1, /1 연산  
- 불리언 → 숫자
- +연산을 통한 결과 true이면 1, false이면, 0
- *→ 불리언
- if 문의 조건 표현식
- for 문의 두번째 조건 표현식
- while, do while 루프의 조건 표현식
- ? 삼항 연산 시 첫 번째 조건 표현식
- || 및 && 의 좌측 피연산자
- || 및 && 연산자
- 논리 연산자 X → 피연산자 선택 연산자
- || 연산자는 첫번째 피연산자 결과가 true 이면 첫 번째 피연산자, false 이면 두 번째 피연산자를 반환 ( a ? a : b)
- && 연산자는 첫번째 피연산자 결과가 true 이면 두 번째 피연산자, false 이면 첫 번째 피연산자를 반환 (a ? b : a)

- - -
### 느슨한/엄격한 동등 비교

- 느슨한 동등 비교 : == (값의 동등함 X → 강제변환을 허용)
- 엄격한 동등 비교 : === (값과 타입 모두의 동등함 X → 강제변환을 허용하지 않음)
- 느슨한 동등 비교는 타입을 숫자로 강제변환하여 비교
