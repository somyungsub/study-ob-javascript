# 11. 메세징과 통합 패턴

여태까지 분할에 대해 알아봤는데, 이번에는 시스템 통합에 관한내용<br />
분산 어플리케이션 통합에는 두 가지 주요 기술이 있는데, `중앙 조정자를 만들어서 모든 정보를 보관하는 것`, `메세지를 사용하여 시스템 전체에 데이터, 이벤트 및 명령을 전파하는 것`<br />
후자를 알아보즈아~<br />
기업 통합 패턴(Enterprise Integration Patterns, GregorHohpe / BobbyWollf 저)에 65가지 바이블이 있으니 참고할 것

- 메시징 시스템의 기본 사항
- 게시(publish)/구독(subscribe) 패턴
- 파이프라인 및 작업 분배 패턴
- 요청(request)/응답(reply) 패턴

## 11-1. 메시징 시스템의 기본 사항

고려해야할 4가지 기본 요소가 있음

1. 단방향 또는 요청/응답 교환할 수 있는 통신의 방향
2. 내용을 결정하는 메시지의 목적
3. 즉시 또는 나중에(비동기식으로) 전송 및 수신할 수 있는 메시지 타이밍
4. 직접 또는 브로커를 통해 발생할 수 있는 메시지의 전달

### 11-1-1. 단방향 및 요청/응답 턴

가장 간단한 통신 패턴은 메시지가 소스 -> 대상으로 단방향 푸쉬(push)되는 경우. 많은 설명이 필요하지 않음

```
________              ________
|      |     push     |       |
| 시작점 | ===========> | 도착점 |
|______|              |_______|
```

단방향 통신의 일반적인 예 : WebSocket을 사용하여 연결된 브라우저에 메시지를 보내거나, 일련의 작업자들에게 작업을 배포하는 시스템

<hr />

그러나 단방향 통신에 비해 웹 서비스 호출같은 요청/응답(양방향) 패턴이 훨씬 인기 있음

```
________              ________
|      |   1.요청      |       |
|      | ===========> | 도착점  |
| 시작점 |   2.응답      |       |
|      | <=========== |       |
|______|              |_______|
```

<hr />

요청/응답 패턴은 구현하기 쉬워보이나, 통신이 비동기이거나 여러 개의 노드가 포함되어 있으면 복잡해짐

```
                  _____________________________________
________          |    ________           ________    |
|      |   1.요청  |    |       |   2.요청  |       |   |
|      | =========|==> |       | ========>|       |   |
|      |          |    |       |          |       |   |
|      |          |    |       |          |       |   |
|      |          |    |_______|          |_______|   |
|      |   3.응답  |                          ||       |
|      | <========|============================       |
|      |          |___________________________________|
________
```
