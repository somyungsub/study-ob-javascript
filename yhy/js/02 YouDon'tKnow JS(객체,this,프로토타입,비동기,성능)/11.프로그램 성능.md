# 5. 프로그램 성능
#### 자바스크립트에서의 성능이란? 특정 작업을 보다 빠르게 그리고 높은 사용자 경험을 제공
ex) 비동기: 순차가 아닌 동시!

##### 전체 실행시간이 같더라도 비동기성은 체감 성능을 올려준다!
##### 사용자가 피부로 느끼는 성능이야말로 실제 측정 가능한 성능 못지않게 중요하다!

##### 이 장에서는 로컬 영역의 비동기 패턴보다 넓은 시야에서 프로그램 수준의 성능을 고찰한다.

## 5.1 웹 워커 - 워커라는게 있었어?
#### 자바스크립트는 단일-스레드!
#### 하지만 단일-스레드가 프로그램 실행을 구조화할 수 있는 유일한 방법은 아니다?

#### 여러분이 짠 프로그램을 두 조각으로 나누어 한 쪽은 메인 UI스레드, 다른 한 족은 별개의 스레드에서 실행한다고 햇을 때, 어떤 이슈가 잇을까?
##### 첫째, 병렬실행이 아니라면 쓰나마나다.
##### 둘째, 스레드간 자원공유에 있어 여러 이슈들이 발생할 수 있다.

??이게 뭔소리냐?

#### 워커: 프로그램을 덩이로 나누어 병렬 실행하는 ‘작업 병행성’을 추구한다.
```javascript
var w1 = new Worker( “http://some.url.1/mycoolworker.js”);
```
#### 위 파일을 별도의 스레드에서 독립적인 프로그램으로 실행한다?

#### 워커는 워커끼리, 메인프로그램과도 스코프 및 자원 공유 X —> 이벤트 메시징 체계를 바탕으로 서로를 연결
#### w1은 이벤트 리스너 + 트리거로 워커가 보낸 이벤트를 구독하고 워커에 이벤트를 보낸다.

### 5.1.1 워커 환경
#### 워커 내부에서는 메인 프로그램 자원에 접근 불가.
#### 네트워크작업과 타이머설정, navigator, location, JSON, applicationCache 등 중요한 전역 변수/특성을 자체 복사하여 접근할 수 있음

```javascript
importScripts(‘foo,js’, ‘bar.js’);
```
#### 스크립트를 동기적으로 읽음

####워커의 주요 용도
1. 처리 집약적 수학 계산
2. 대용량 데이터 세트 정렬
3. 데이터 작업(압축, 오디오 분석, 이미지 픽셀 변환 등)
4. 트래픽 높은 네트워크 통신

### 5.1.2 데이터 전송
#### old: 전체 데이터를 문자열 값으로 직렬화 하는 방법 -> 속도 이슈, 데이터 복사 과정에서의 메모리 사용량 이슈
#### now: 수신측에서 ‘구조화된 복제 알고리즘’으로 객체를 복사/복제
#### other: ‘트랜스퍼러블 객체’ (크롬과 파이어폭스가 지원): 데이터 자체는 그대로 두고 객체의 소유권만 전송하는 방식
#### 트랜스퍼러블 인터페이스를 구현한 자료 구조는 자동으로 그렇게 전송됨

```javascript
postMessage(foo.buffer, [foo.buffer]);	// foo는 ‘Uint8Array’ 타입
```

#### 데이터 세트 규모가 방대할 때 고려해보라던데,
#### 각주에 달린 https://developer.mozilla.org/en-US/docs/Web/API/Transferable 에 들어가보니
#### deprecated됨…???

### 5.1.3 공유 워커
```javascript
var w1 = new SharedWorker(‘http://some.url.1/mycoolworker.js');
```
https://gist.github.com/easywaldo/b8178cc432daf02ee3bdb4fe9970b195

### 5.2 SIMD
#### 여러 데이터 비트를 병렬로 처리 https://01.org/node/1495
#### https://d2.naver.com/helloworld/7495331
#### SIMD.js는 저수준 데이터의 병렬 처리를 위한 명세로 제안됐다. 하지만 WebAssembly를 위한 SIMD 제안이 진행되면서 SIMD.js 제안은 Stage 3(Candidate 단계)에서 제거됐다.

### 5.3 asm.js
